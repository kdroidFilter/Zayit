<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Download Zayit - Jewish Study Library</title>
    <meta name="description" content="Download Zayit for Windows, macOS, and Linux. Free Jewish study library application.">
    
    <link rel="icon" type="image/png" href="images/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="images/favicon.svg">
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Title Bar -->
    <header class="title-bar">
        <div class="title-bar-container">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <a href="index.html" class="title-bar-logo">
                    <img src="images/icon.png" alt="Zayit">
                    <span>Zayit</span>
                </a>
            </div>

            <div class="title-bar-controls">
                <a href="https://github.com/kdroidFilter/SeforimApp" target="_blank" rel="noopener noreferrer" class="title-bar-button source-button">
                    <svg class="icon-sm">
                        <use href="images/icons.svg#github"></use>
                    </svg>
                    <span class="en-text">Source</span>
                    <span class="he-text hidden">קוד</span>
                </a>
                <a href="https://ko-fi.com/lomityaesh" target="_blank" rel="noopener noreferrer" class="title-bar-button support-button">
                    <svg class="icon-sm">
                        <use href="images/icons.svg#coffee"></use>
                    </svg>
                    <span class="en-text">Support</span>
                    <span class="he-text hidden">תמיכה</span>
                </a>
                <button class="title-bar-button theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                    <svg class="icon theme-icon-light">
                        <use href="images/icons.svg#sun"></use>
                    </svg>
                    <svg class="icon theme-icon-dark hidden">
                        <use href="images/icons.svg#moon"></use>
                    </svg>
                </button>
                <button class="title-bar-button lang-toggle" onclick="toggleLanguage()" id="langToggle">
                    ע
                </button>
                <a href="index.html" class="title-bar-button">
                    <svg class="icon-sm">
                        <use href="images/icons.svg#arrow-left"></use>
                    </svg>
                    <span class="en-text">Back</span>
                    <span class="he-text hidden">חזרה</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Compact Download Section -->
    <main class="download-main">
        <div class="download-container">
            <h1 class="download-title">
                <span class="en-text">Download Zayit</span>
                <span class="he-text hidden">הורדת זית</span>
            </h1>
            
            <p class="download-description">
                <span class="en-text">Your digital study hall awaits. Fast, reliable, and completely free.</span>
                <span class="he-text hidden">בית המדרש הדיגיטלי שלכם מחכה. מהיר, אמין וחינמי לחלוטין.</span>
            </p>
            
            <div class="download-stats">
                <span class="stat-item">6,800+ <span class="en-text">Books</span><span class="he-text hidden">ספרים</span></span>
                <span class="stat-item">100% <span class="en-text">Offline</span><span class="he-text hidden">אופליין</span></span>
                <span class="stat-item" id="downloadStats"><!-- Download count --></span>
            </div>
            
            <!-- System Detection -->
            <div class="system-detection">
                <span class="detected-system" id="detectedSystem">Detecting platform...</span>
            </div>

            <!-- Main Download -->
            <div class="main-download">
                <a href="#" class="download-btn main" id="mainDownloadBtn">
                    <svg class="icon-sm">
                        <use href="images/icons.svg#download"></use>
                    </svg>
                    <span class="download-text">
                        <span class="filename" id="mainFilename">Loading...</span>
                    </span>
                </a>
            </div>

            <!-- Alternative Options -->
            <div class="alternative-options">
                <button class="expand-toggle" onclick="toggleAlternatives()">
                    <span class="en-text">More options</span>
                    <span class="he-text hidden">אפשרויות נוספות</span>
                    <svg class="icon-sm chevron-icon">
                        <use href="images/icons.svg#chevron-down"></use>
                    </svg>
                </button>
                
                <div class="alternatives-content" id="alternativesContent">
                    <a href="https://github.com/kdroidFilter/Zayit/releases/download/v0.4.5/Zayit-0.4.5_x64.msi" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">Zayit-0.4.5_x64.msi</span>
                            <span class="filesize">137 MB</span>
                        </span>
                    </a>
                    <a href="https://github.com/kdroidFilter/Zayit/releases/download/v0.4.5/Zayit-0.4.5_arm64.exe" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">Zayit-0.4.5_arm64.exe</span>
                            <span class="filesize">135 MB</span>
                        </span>
                    </a>
                    <a href="https://github.com/kdroidFilter/Zayit/releases/download/v0.4.5/Zayit-0.4.5_arm64.msi" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">Zayit-0.4.5_arm64.msi</span>
                            <span class="filesize">134 MB</span>
                        </span>
                    </a>
                </div>
            </div>

            <!-- Other Platforms -->
            <div class="other-platforms">
                <button class="expand-toggle" onclick="togglePlatforms()">
                    <span class="en-text">Other platforms</span>
                    <span class="he-text hidden">פלטפורמות אחרות</span>
                    <svg class="icon-sm chevron-icon">
                        <use href="images/icons.svg#chevron-down"></use>
                    </svg>
                </button>
                
                <div class="platforms-content" id="platformsContent">
                    <a href="https://github.com/kdroidFilter/Zayit/releases/download/v0.4.5/Zayit-0.4.5_universal.dmg" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">Zayit-0.4.5_universal.dmg</span>
                            <span class="filesize">142 MB • macOS</span>
                        </span>
                    </a>
                    <a href="https://github.com/kdroidFilter/Zayit/releases/download/v0.4.5/Zayit-0.4.5_amd64.deb" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">Zayit-0.4.5_amd64.deb</span>
                            <span class="filesize">139 MB • Linux</span>
                        </span>
                    </a>
                    <a href="https://github.com/kdroidFilter/Zayit/releases/download/v0.4.5/Zayit-0.4.5_x86_64.rpm" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">Zayit-0.4.5_x86_64.rpm</span>
                            <span class="filesize">140 MB • Linux</span>
                        </span>
                    </a>
                </div>
            </div>

            <div class="other-platforms">
                <button class="expand-toggle" onclick="toggleOtherFiles()">
                    <span class="en-text">Other files</span>
                    <span class="he-text hidden">קבצים נוספים</span>
                    <svg class="icon-sm chevron-icon">
                        <use href="images/icons.svg#chevron-down"></use>
                    </svg>
                </button>
                
                <div class="platforms-content" id="otherFilesContent"></div>
            </div>

            <!-- Database Files -->
            <div class="database-section">
                <button class="expand-toggle" onclick="toggleDatabase()">
                    <span class="en-text">Offline database</span>
                    <span class="he-text hidden">ספרי קבצי מסד נתונים</span>
                    <svg class="icon-sm chevron-icon">
                        <use href="images/icons.svg#chevron-down"></use>
                    </svg>
                </button>
                
                <div class="database-content" id="databaseContent">
                    <div class="database-info">
                        <p class="database-description">
                            <span class="en-text">Complete database of Jewish texts for offline use</span>
                            <span class="he-text hidden">מסד נתונים מלא של טקסטים יהודיים לשימוש לא מקוון</span>
                        </p>
                        <p class="database-size">
                            <span class="en-text">Total database size: 2,865 MB</span>
                            <span class="he-text hidden">גודל כולל של קבצי מסד הנתונים: 2865 מ״ב</span>
                        </p>
                    </div>
                    
                    <div class="database-files">
                        <a href="https://github.com/kdroidFilter/SeforimLibrary/releases/download/20260114122617/seforim_bundle.tar.zst.part01" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                            <svg class="icon-sm">
                                <use href="images/icons.svg#download"></use>
                            </svg>
                            <span class="download-text">
                                <span class="filename">seforim_bundle.tar.zst.part01</span>
                                <span class="filesize">1,946 MB</span>
                                <span class="file-part">Part 1 of 2</span>
                            </span>
                        </a>
                        
                        <a href="https://github.com/kdroidFilter/SeforimLibrary/releases/download/20260114122617/seforim_bundle.tar.zst.part02" class="download-btn alt" target="_blank" rel="noopener noreferrer">
                            <svg class="icon-sm">
                                <use href="images/icons.svg#download"></use>
                            </svg>
                            <span class="download-text">
                                <span class="filename">seforim_bundle.tar.zst.part02</span>
                                <span class="filesize">919 MB</span>
                                <span class="file-part">Part 2 of 2</span>
                            </span>
                        </a>
                    </div>
                    
                    <div class="database-instructions">
                        <p class="instruction-text">
                            <span class="en-text">Download both parts and extract to get the complete database</span>
                            <span class="he-text hidden">הורד את שני החלקים וחלץ כדי לקבל את מסד הנתונים המלא</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        function detectPlatform() {
            const userAgent = navigator.userAgent.toLowerCase();
            const platform = navigator.platform.toLowerCase();

            let os = 'windows';
            let arch = 'x64';
            let displayName = 'Windows x64';

            if (userAgent.includes('mac') || platform.includes('mac')) {
                os = 'macos';
                arch = 'universal';
                displayName = 'macOS';
            } else if (userAgent.includes('linux') || platform.includes('linux')) {
                os = 'linux';
                arch = userAgent.includes('arm') || userAgent.includes('aarch64') ? 'arm64' : 'x64';
                displayName = arch === 'arm64' ? 'Linux ARM64' : 'Linux x64';
            } else {
                os = 'windows';
                arch = userAgent.includes('arm') || userAgent.includes('aarch64') ? 'arm64' : 'x64';
                displayName = arch === 'arm64' ? 'Windows ARM64' : 'Windows x64';
            }

            return { os, arch, displayName };
        }

        function formatBytes(bytes) {
            if (!Number.isFinite(bytes) || bytes <= 0) return '';
            const mb = bytes / (1024 * 1024);
            if (mb >= 1024) return `${(mb / 1024).toFixed(1)} GB`;
            return `${Math.round(mb)} MB`;
        }

        function classifyAsset(name) {
            const lower = name.toLowerCase();

            const isWindows = lower.endsWith('.exe') || lower.endsWith('.msi');
            const isMac = lower.endsWith('.dmg');
            const isLinux = lower.endsWith('.deb') || lower.endsWith('.rpm') || lower.endsWith('.appimage');
            const isArchive = lower.endsWith('.zip') || lower.endsWith('.tar.gz') || lower.endsWith('.tgz') || lower.endsWith('.tar.xz');

            let os = 'other';
            if (isWindows) os = 'windows';
            else if (isMac) os = 'macos';
            else if (isLinux) os = 'linux';

            let arch = 'any';
            if (lower.includes('arm64') || lower.includes('aarch64')) arch = 'arm64';
            else if (lower.includes('x64') || lower.includes('x86_64') || lower.includes('amd64')) arch = 'x64';
            else if (lower.includes('universal')) arch = 'universal';

            let ext = '';
            const lastDot = lower.lastIndexOf('.');
            if (lastDot >= 0) ext = lower.slice(lastDot + 1);

            return { os, arch, ext, isArchive };
        }

        function assetPriority(asset, platform) {
            const name = asset.name.toLowerCase();

            const osMatches = asset.os === platform.os;
            const archMatches = asset.arch === platform.arch || asset.arch === 'any' || (platform.os === 'macos' && asset.arch === 'universal');
            const base = (osMatches ? 1000 : 0) + (archMatches ? 100 : 0);

            if (asset.os === 'windows') {
                if (name.endsWith('.exe')) return base + 30;
                if (name.endsWith('.msi')) return base + 20;
            }

            if (asset.os === 'macos') {
                if (name.endsWith('.dmg')) return base + 30;
            }

            if (asset.os === 'linux') {
                if (name.endsWith('.deb')) return base + 30;
                if (name.endsWith('.rpm')) return base + 20;
                if (name.endsWith('.appimage')) return base + 10;
            }

            if (asset.isArchive) return base + 1;

            return base;
        }

        async function fetchLatestRelease() {
            const response = await fetch('https://api.github.com/repos/kdroidFilter/Zayit/releases/latest', {
                headers: {
                    'Accept': 'application/vnd.github+json'
                }
            });
            if (!response.ok) {
                throw new Error(`GitHub API error: ${response.status}`);
            }
            return response.json();
        }

        function renderDownloadButton(asset) {
            const a = document.createElement('a');
            a.href = asset.url;
            a.className = 'download-btn alt';
            a.target = '_blank';
            a.rel = 'noopener noreferrer';

            const sizeLabel = formatBytes(asset.size);
            const extra = asset.os === 'windows' ? 'Windows' : asset.os === 'macos' ? 'macOS' : asset.os === 'linux' ? 'Linux' : '';
            const suffix = extra ? ` • ${extra}` : '';

            a.innerHTML = `
                        <svg class="icon-sm">
                            <use href="images/icons.svg#download"></use>
                        </svg>
                        <span class="download-text">
                            <span class="filename">${asset.name}</span>
                            <span class="filesize">${sizeLabel}${suffix}</span>
                        </span>
                    `;
            return a;
        }

        function updateContainersVisibility() {
            const alternatives = document.getElementById('alternativesContent');
            const platforms = document.getElementById('platformsContent');
            const otherFiles = document.getElementById('otherFilesContent');
            const altSection = alternatives?.closest('.alternative-options');
            const platformSection = platforms?.closest('.other-platforms');
            const otherFilesSection = otherFiles?.closest('.other-platforms');

            if (alternatives && altSection) {
                altSection.style.display = alternatives.children.length > 0 ? '' : 'none';
            }
            if (platforms && platformSection) {
                platformSection.style.display = platforms.children.length > 0 ? '' : 'none';
            }
            if (otherFiles && otherFilesSection) {
                otherFilesSection.style.display = otherFiles.children.length > 0 ? '' : 'none';
            }
        }

        function getFallbackAssetsFromDom() {
            const containers = ['alternativesContent', 'platformsContent', 'otherFilesContent']
                .map(id => document.getElementById(id))
                .filter(Boolean);

            const links = containers.flatMap(container => Array.from(container.querySelectorAll('a[href]')));

            return links
                .map(a => {
                    const filenameEl = a.querySelector('.filename');
                    const name = filenameEl?.textContent?.trim() || (a.href ? a.href.split('/').pop() : '');
                    const meta = classifyAsset(name);
                    return {
                        name,
                        url: a.href,
                        size: NaN,
                        os: meta.os,
                        arch: meta.arch,
                        ext: meta.ext,
                        isArchive: meta.isArchive
                    };
                })
                .filter(a => !!a.name && !!a.url);
        }

        async function updateDownloadUI() {
            const platform = detectPlatform();

            const detectedSystem = document.getElementById('detectedSystem');
            if (detectedSystem) {
                detectedSystem.textContent = `${platform.displayName} • ${'Loading...'}`;
            }

            try {
                const release = await fetchLatestRelease();
                const tag = release.tag_name || '';
                const releaseUrl = release.html_url || 'https://github.com/kdroidFilter/Zayit/releases/latest';

                const assets = (release.assets || [])
                    .map(a => {
                        const meta = classifyAsset(a.name || '');
                        return {
                            name: a.name || '',
                            url: a.browser_download_url,
                            size: a.size,
                            os: meta.os,
                            arch: meta.arch,
                            ext: meta.ext,
                            isArchive: meta.isArchive
                        };
                    })
                    .filter(a => !!a.url && !!a.name);

                const best = assets
                    .slice()
                    .sort((a, b) => assetPriority(b, platform) - assetPriority(a, platform))[0];

                const mainDownloadBtn = document.getElementById('mainDownloadBtn');
                const mainFilename = document.getElementById('mainFilename');

                if (mainDownloadBtn && mainFilename) {
                    if (best) {
                        mainDownloadBtn.href = best.url;
                        mainFilename.textContent = best.name;
                    } else {
                        mainDownloadBtn.href = releaseUrl;
                        mainFilename.textContent = tag || 'Latest release';
                    }
                }

                if (detectedSystem) {
                    const sizeLabel = best ? formatBytes(best.size) : '';
                    const parts = [`${platform.displayName}`];
                    if (tag) parts.push(tag);
                    if (sizeLabel) parts.push(sizeLabel);
                    detectedSystem.textContent = parts.join(' • ');
                }

                const alternativesContent = document.getElementById('alternativesContent');
                const platformsContent = document.getElementById('platformsContent');
                const otherFilesContent = document.getElementById('otherFilesContent');

                if (alternativesContent) alternativesContent.innerHTML = '';
                if (platformsContent) platformsContent.innerHTML = '';
                if (otherFilesContent) otherFilesContent.innerHTML = '';

                const mainUrl = best?.url;
                const sameOs = assets.filter(a => a.os === platform.os && a.url !== mainUrl);
                const otherPlatforms = assets.filter(a => a.os !== platform.os && a.os !== 'other');
                const otherFiles = assets.filter(a => a.os === 'other');

                const sortByName = (a, b) => a.name.localeCompare(b.name);
                sameOs.sort(sortByName);
                otherPlatforms.sort(sortByName);
                otherFiles.sort(sortByName);

                if (alternativesContent) {
                    sameOs.forEach(a => alternativesContent.appendChild(renderDownloadButton(a)));
                }

                if (platformsContent) {
                    otherPlatforms.forEach(a => platformsContent.appendChild(renderDownloadButton(a)));
                }

                if (otherFilesContent) {
                    otherFiles.forEach(a => otherFilesContent.appendChild(renderDownloadButton(a)));
                }

                updateContainersVisibility();
            } catch (error) {
                const mainDownloadBtn = document.getElementById('mainDownloadBtn');
                const mainFilename = document.getElementById('mainFilename');

                const fallbackAssets = getFallbackAssetsFromDom();
                const bestFallback = fallbackAssets
                    .slice()
                    .sort((a, b) => assetPriority(b, platform) - assetPriority(a, platform))[0];

                if (bestFallback && mainDownloadBtn && mainFilename) {
                    mainDownloadBtn.href = bestFallback.url;
                    mainFilename.textContent = bestFallback.name;
                } else if (mainDownloadBtn && mainFilename) {
                    mainDownloadBtn.href = 'https://github.com/kdroidFilter/Zayit/releases/latest';
                    mainFilename.textContent = 'Latest release';
                }

                if (detectedSystem) {
                    detectedSystem.textContent = `${platform.displayName} • ${'Latest release unavailable'}`;
                }
            }
        }

        let isDark = localStorage.getItem('theme') === 'light' ? false : 
                    (localStorage.getItem('theme') === 'dark' || !localStorage.getItem('theme') || window.matchMedia('(prefers-color-scheme: dark)').matches);
        
        let isHebrew = localStorage.getItem('language') === 'he' || 
                      (localStorage.getItem('language') === 'en' ? false : 
                       (navigator.language.startsWith('he') || navigator.languages.some(lang => lang.startsWith('he'))));

        function applyTheme() {
            if (isDark) {
                document.documentElement.classList.add('dark');
                document.querySelector('.theme-icon-light').classList.add('hidden');
                document.querySelector('.theme-icon-dark').classList.remove('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                document.querySelector('.theme-icon-light').classList.remove('hidden');
                document.querySelector('.theme-icon-dark').classList.add('hidden');
            }
        }

        function toggleTheme() {
            isDark = !isDark;
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            applyTheme();
        }

        function toggleLanguage() {
            isHebrew = !isHebrew;
            localStorage.setItem('language', isHebrew ? 'he' : 'en');
            
            document.documentElement.dir = isHebrew ? 'rtl' : 'ltr';
            
            const langToggle = document.getElementById('langToggle');
            if (langToggle) {
                langToggle.textContent = isHebrew ? 'en' : 'ע';
            }
            
            const enTexts = document.querySelectorAll('.en-text');
            const heTexts = document.querySelectorAll('.he-text');
            
            if (isHebrew) {
                enTexts.forEach(el => el.classList.add('hidden'));
                heTexts.forEach(el => el.classList.remove('hidden'));
            } else {
                enTexts.forEach(el => el.classList.remove('hidden'));
                heTexts.forEach(el => el.classList.add('hidden'));
            }
        }

        async function loadDownloadCount() {
            try {
                const response = await fetch('download-count.json');
                const data = await response.json();
                const downloadStats = document.getElementById('downloadStats');
                if (downloadStats && data.count) {
                    downloadStats.innerHTML = `+${data.count.toLocaleString()} <span class="en-text">Downloads</span><span class="he-text ${isHebrew ? '' : 'hidden'}">הורדות</span>`;
                }
            } catch (error) {
                console.log('Could not load download count');
            }
        }

        function toggleAlternatives() {
            const content = document.getElementById('alternativesContent');
            const button = content.previousElementSibling;
            const isHidden = content.style.display === 'none' || !content.style.display;
            
            content.style.display = isHidden ? 'block' : 'none';
            button.classList.toggle('expanded', isHidden);
            
            const enText = button.querySelector('.en-text');
            const heText = button.querySelector('.he-text');
            
            if (isHidden) {
                enText.textContent = 'Hide options';
                heText.textContent = 'הסתר אפשרויות';
            } else {
                enText.textContent = 'More options';
                heText.textContent = 'אפשרויות נוספות';
            }
        }

        function togglePlatforms() {
            const content = document.getElementById('platformsContent');
            const button = content.previousElementSibling;
            const isHidden = content.style.display === 'none' || !content.style.display;
            
            content.style.display = isHidden ? 'block' : 'none';
            button.classList.toggle('expanded', isHidden);
            
            const enText = button.querySelector('.en-text');
            const heText = button.querySelector('.he-text');
            
            if (isHidden) {
                enText.textContent = 'Hide platforms';
                heText.textContent = 'הסתר פלטפורמות';
            } else {
                enText.textContent = 'Other platforms';
                heText.textContent = 'פלטפורמות אחרות';
            }
        }

        function toggleOtherFiles() {
            const content = document.getElementById('otherFilesContent');
            const button = content.previousElementSibling;
            const isHidden = content.style.display === 'none' || !content.style.display;
            
            content.style.display = isHidden ? 'block' : 'none';
            button.classList.toggle('expanded', isHidden);
            
            const enText = button.querySelector('.en-text');
            const heText = button.querySelector('.he-text');
            
            if (isHidden) {
                enText.textContent = 'Hide files';
                heText.textContent = 'הסתר קבצים';
            } else {
                enText.textContent = 'Other files';
                heText.textContent = 'קבצים נוספים';
            }
        }

        function toggleDatabase() {
            const content = document.getElementById('databaseContent');
            const button = content.previousElementSibling;
            const isHidden = content.style.display === 'none' || !content.style.display;
            
            content.style.display = isHidden ? 'block' : 'none';
            button.classList.toggle('expanded', isHidden);
            
            const enText = button.querySelector('.en-text');
            const heText = button.querySelector('.he-text');
            
            if (isHidden) {
                enText.textContent = 'Hide database';
                heText.textContent = 'הסתר מסד נתונים';
            } else {
                enText.textContent = 'Offline database';
                heText.textContent = 'מסד נתונים אופליין';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateDownloadUI();
            applyTheme();
            loadDownloadCount();
            
            // Initialize expandable sections as hidden
            document.getElementById('alternativesContent').style.display = 'none';
            document.getElementById('platformsContent').style.display = 'none';
            document.getElementById('otherFilesContent').style.display = 'none';
            document.getElementById('databaseContent').style.display = 'none';
            
            if (isHebrew) {
                document.documentElement.dir = 'rtl';
                document.getElementById('langToggle').textContent = 'en';
                
                document.querySelectorAll('.en-text').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('.he-text').forEach(el => el.classList.remove('hidden'));
            }
        });

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (!localStorage.getItem('theme')) {
                isDark = e.matches;
                applyTheme();
            }
        });
    </script>
</body>
</html>
